<ion-content [fullscreen]="true" class="dashboard-content" color-scheme="light">

  <div *ngIf="isLoadingData" class="ion-text-center ion-padding-top">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Chargement du tableau de bord...</p>
  </div>

  <div *ngIf="!isLoadingData">
      <div class="welcome-section">
          <div class="welcome-card">
              <div class="welcome-icon">
                  ðŸ‘‹
              </div>
              <h1>Bonjour {{ userName }} !</h1>
              <h2>Bienvenue sur <span class="app-name">Soutiens-moi</span></h2>
              <p class="welcome-question">PrÃªt Ã  commencer ?</p>
          </div>
      </div>

      <div class="quick-actions-section">
          <h3 class="section-title">
              <ion-icon name="flash-outline"></ion-icon>
              Actions rapides
          </h3>
          </div>

      <div class="upcoming-sessions-section">
          <div class="section-header">
              <h3 class="section-title">
                  <ion-icon name="time-outline"></ion-icon>
                  Mes prochaines sÃ©ances
              </h3>
              <ion-button fill="clear" size="small" (click)="viewAllSessions()">
                  Voir tout
              </ion-button>
          </div>

          <div class="sessions-list" *ngIf="upcomingSessions.length > 0">
              <div class="session-card" *ngFor="let session of upcomingSessions">
                  <div class="session-date">
                      <div class="day">{{ session.day }}</div>
                      <div class="month">{{ session.month }}</div>
                  </div>
                  <div class="session-info">
                      <h4>{{ session.subject }}</h4>
                      <p class="session-tutor">
                          <ion-icon name="person-outline"></ion-icon>
                          Avec {{ session.tutor }}
                      </p>
                      <p class="session-time">
                          <ion-icon name="time-outline"></ion-icon>
                          {{ session.time }}
                      </p>
                  </div>
                  <div class="session-mode">
                      <ion-badge [color]="session.mode === 'PrÃ©sentiel' ? 'success' : 'primary'">
                          {{ session.mode }}
                      </ion-badge>
                  </div>
              </div>
          </div>

          <div class="no-sessions" *ngIf="upcomingSessions.length === 0">
              <div class="no-sessions-icon">
                  ðŸ“…
              </div>
              <h4>Aucune sÃ©ance programmÃ©e</h4>
              <p>Planifiez votre premiÃ¨re sÃ©ance de tutorat</p>
              <ion-button fill="outline" color="primary" (click)="goToPlanning()">
                  <ion-icon name="add-outline" slot="start"></ion-icon>
                  Planifier une sÃ©ance
              </ion-button>
          </div>
      </div>

      <div class="stats-section">
          <h3 class="section-title">
              <ion-icon name="stats-chart-outline"></ion-icon>
              Mes statistiques
          </h3>

          <div class="stats-grid">
              <div class="stat-item">
                  <div class="stat-number">{{ userStats.totalSessions }}</div>
                  <div class="stat-label">SÃ©ances suivies</div>
              </div>
              <div class="stat-item">
                  <div class="stat-number">{{ userStats.hoursLearned }}</div>
                  <div class="stat-label">Heures d'apprentissage</div>
              </div>
              <div class="stat-item">
                  <div class="stat-number">{{ userStats.averageRating }}/5</div>
                  <div class="stat-label">Note moyenne</div>
              </div>
          </div>
      </div>
  </div>

</ion-content>
